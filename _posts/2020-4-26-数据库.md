---
layout: post
title: 数据库MySQL
---

# 数据库

数据库的发展：网状数据库 -->层次型数据库 --> 关系数据库 -->非关系型数据库(MongoDB)

## MySQL数据库

mysqld.exe 启动文件，占用端口3306

mysql.exe客户端工具

### 安装mysql

1. 配置my.ini文件
2. 命令提示户以管理员身份运行，输入mysql --initialize --console初始化，会打印出root用户的初始密码。mysql --initialize --insecure不用密码初始化
3. 安装MySQL服务，mysql --install mysql，安装成功之后net start mysql启动，也可以在控制面板中启动
4. 加入环境变量

### 连接mysql

mysql -h127.0.0.1 -P3306 -u用户名 -p

-h host 主机（IP地址/域名） localhost/127.0.0.1

-P port 端口

-u user 用户 root管理员账户

-p password 密码

-h -P可以省略

quit 退出服务器的连接

### 常用管理命令

show databases;显示数据库列表

use databasename;进入指定的数据库

show tables;显示当前数据库下所有的表

desc tablename;描述表结构

## SQL语句

结构化查询语言，用于操作关系型数据库服务器，包括对数据库的增删查改。

### SQl语句执行方式

#### 交互模式

在客户端输入一行命令，回车后执行一行命令，适用于临时性的查看数据。

#### 脚本模式

客户端把要执行的命令都放在.sql文件中，然后提交给服务器一次性执行。

SQl语句不区分大小写，习惯上关键字大写，非关键字小写。

### SQL使用

创建数据库：create database databasename;为了防止已经有了数据库，先判断是否有此数据库，有先删除。drop database if exists batabsename;

删除数据库：drop database databasename;

创建数据表：

```sql
create table tablename(
	sid INT, #列名称  类型
    name varchar(8) #8:长度，字符串必须指定长度。
);
```

插入数据：

```sql
insert into tablename values("1",'张三')
```



#### MySQL数据类型

Text类型：

| 数据类型         | 描述                                                         |
| :--------------- | ------------------------------------------------------------ |
| char(size)       | 保存固定长度的字符串，最多255个字符串。                      |
| varchar(size)    | 保存可变长度的字符串，最多255个字符串，如果长度大于255，则被转换为TEXT类型 |
| tinytext         | 存放最大长度为255个字符的字符串                              |
| text             | 存放最大长度为65535个字符的字符串                            |
| blob             | 用于blobs(Binary Large OBjects)，存放最多65535字节的数据     |
| mediumtext       | 存放最大长度为16,777,215个字符的字符串                       |
| mediumblob       | 用于blobs，存放16,777,215字节的数据                          |
| longtext         | 存放最大长度为4,294,967,295个字符串                          |
| longblob         | 用于用于 BLOBs。存放最多 4,294,967,295 字节的数据。          |
| ENUM(x,y,z,etc.) | 允许你输入可能值的列表。可以在 ENUM 列表中列出最大 65535 个值。如果列表中不存在插入的值，则插入空值。注释：这些值是按照你输入的顺序存储的。 |
| SET              | 与 ENUM 类似，SET 最多只能包含 64 个列表项，不过 SET 可存储一个以上的值。 |

Numberl类型：

| 数据类型        | 描述                                                         |
| --------------- | ------------------------------------------------------------ |
| TINYINT(size)   | -128 到 127 常规。0 到 255 无符号*。在括号中规定最大位数。   |
| SMALLINT(size)  | -32768 到 32767 常规。0 到 65535 无符号*。在括号中规定最大位数。 |
| MEDIUMINT(size) | -8388608 到 8388607 普通。0 to 16777215 无符号*。在括号中规定最大位数。 |
| INT(size)       | -2147483648 到 2147483647 常规。0 到 4294967295 无符号*。在括号中规定最大位数。 |
| BIGINT(size)    | -9223372036854775808 到 9223372036854775807 常规。0 到 18446744073709551615 无符号*。在括号中规定最大位数。 |
| FLOAT(size,d)   | 带有浮动小数点的小数字。在括号中规定最大位数。在 d 参数中规定小数点右侧的最大位数。 |
| DOUBLE(size,d)  | 带有浮动小数点的大数字。在括号中规定最大位数。在 d 参数中规定小数点右侧的最大位数。 |
| DECIMAL(size,d) | 作为字符串存储的 DOUBLE 类型，允许固定的小数点。             |

\* 这些整数类型拥有额外的选项 UNSIGNED。通常，整数可以是负数或正数。如果添加 UNSIGNED 属性，那么范围将从 0 开始，而不是某个负数。

Date 类型：

| 数据类型    | 描述                                                         |
| :---------- | :----------------------------------------------------------- |
| DATE()      | 日期。格式：YYYY-MM-DD注释：支持的范围是从 '1000-01-01' 到 '9999-12-31' |
| DATETIME()  | *日期和时间的组合。格式：YYYY-MM-DD HH:MM:SS注释：支持的范围是从 '1000-01-01 00:00:00' 到 '9999-12-31 23:59:59' |
| TIMESTAMP() | *时间戳。TIMESTAMP 值使用 Unix 纪元('1970-01-01 00:00:00' UTC) 至今的描述来存储。格式：YYYY-MM-DD HH:MM:SS注释：支持的范围是从 '1970-01-01 00:00:01' UTC 到 '2038-01-09 03:14:07' UTC |
| TIME()      | 时间。格式：HH:MM:SS 注释：支持的范围是从 '-838:59:59' 到 '838:59:59' |
| YEAR()      | 2 位或 4 位格式的年。注释：4 位格式所允许的值：1901 到 2155。2 位格式所允许的值：70 到 69，表示从 1970 到 2069。 |

\* 即便 DATETIME 和 TIMESTAMP 返回相同的格式，它们的工作方式很不同。在 INSERT 或 UPDATE 查询中，TIMESTAMP 自动把自身设置为当前的日期和时间。TIMESTAMP 也接受不同的格式，比如 YYYYMMDDHHMMSS、YYMMDDHHMMSS、YYYYMMDD 或 YYMMDD。